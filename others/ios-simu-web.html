<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>iOS Web Ecosystem</title>
    <link href="https://fonts.cdnfonts.com/css/sf-pro-display" rel="stylesheet">
    <style>
        /* ... (Existing styles remain unchanged) ... */
        :root {
            --bg-body: #F5F5F7;
            --bg-card: #FFFFFF;
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --accent: #0066CC;
            --accent-hover: #004499;
            --nav-height: 48px;
            --radius-lg: 24px;
            --shadow-lg: 0 18px 40px rgba(0,0,0,0.08);
            --code-bg: #1C1C1E;
            --transition: cubic-bezier(0.165, 0.84, 0.44, 1);
            
            /* Dark Mode Variables (Default Light) */
            --bg-nav: rgba(255, 255, 255, 0.85);
            --border-color: rgba(0,0,0,0.05);
        }

        /* --- DARK MODE OVERRIDES --- */
        body.dark-mode {
            --bg-body: #000000;
            --bg-card: #1C1C1E;
            --text-primary: #F5F5F7;
            --text-secondary: #A1A1A6;
            --accent: #0A84FF;
            --accent-hover: #0077ED;
            --bg-nav: rgba(28, 28, 30, 0.85);
            --border-color: rgba(255,255,255,0.1);
            --shadow-lg: 0 18px 40px rgba(0,0,0,0.4);
        }

        /* Dark Mode Specific Tweaks */
        body.dark-mode .nav-logo { color: #fff; }
        body.dark-mode .nav-links-desktop { color: #ccc; }
        body.dark-mode .hamburger .line { background: #fff; }
        body.dark-mode .mobile-menu { background: rgba(28, 28, 30, 0.98); }
        body.dark-mode .mobile-menu a { color: #fff; }
        body.dark-mode .hero { background: #000; border-bottom: 1px solid #333; }
        body.dark-mode .hero h1 { color: #fff; }
        
        body.dark-mode .text-page li { color: #ccc; }
        body.dark-mode .text-page p { color: #ccc; }
        body.dark-mode footer { background: #000; border-top: 1px solid #333; }
        body.dark-mode .mock-phone { border-color: #333; }
        body.dark-mode .doc-block h3 { border-bottom: 1px solid #333; }
        body.dark-mode .text-page h2 { border-bottom: 1px solid #333; }

        /* --- GLOBAL RESET --- */
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        
        html { overflow-x: hidden; } /* Prevent horizontal scroll on root */

        body, button, input, select, textarea {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex; flex-direction: column;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        a { text-decoration: none; color: inherit; transition: color 0.2s; cursor: pointer; }
        
        /* --- VIEW MANAGEMENT --- */
        .view-section {
            display: none; animation: fadeIn 0.5s var(--transition); flex: 1; width: 100%; /* Ensure full width */
        }
        .view-section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- NAVBAR --- */
        .navbar {
            position: sticky; top: 0; width: 100%; height: var(--nav-height);
            background: var(--bg-nav); backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color); 
            z-index: 2005; transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .nav-content {
            max-width: 980px; margin: 0 auto; height: 100%;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 24px;
        }

        .nav-logo { 
            font-weight: 600; font-size: 19px; display: flex; 
            align-items: center; gap: 8px; color: #000; cursor: pointer;
            font-family: "SF Pro Display"; transition: color 0.3s ease;
            white-space: nowrap; /* Prevent logo wrap */
        }

        .nav-links-desktop {
            display: flex; gap: 28px; font-size: 12px; color: #333; font-weight: 400; transition: color 0.3s ease;
        }
        .nav-links-desktop a:hover { color: var(--accent); }
        .nav-links-desktop a.active { color: var(--accent); font-weight: 600; }
        
        .dm-toggle { cursor: pointer; opacity: 0.7; }
        .dm-toggle:hover { opacity: 1; }

        /* --- 2-BAR HAMBURGER --- */
        .hamburger {
            display: none; flex-direction: column; justify-content: center;
            gap: 6px; width: 24px; height: 24px; cursor: pointer; z-index: 2006;
        }
        .line {
            width: 20px; height: 1.5px; background: #1D1D1F;
            border-radius: 2px; transition: transform 0.3s var(--transition), opacity 0.3s, background-color 0.3s;
            transform-origin: center;
        }
        .hamburger.active .line:nth-child(1) { transform: translateY(3.75px) rotate(45deg); }
        .hamburger.active .line:nth-child(2) { transform: translateY(-3.75px) rotate(-45deg); }

        /* --- MOBILE MENU --- */
        .mobile-menu {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: rgba(255,255,255,0.98); backdrop-filter: blur(15px);
            z-index: 2001; display: block; flex-direction: column;
            padding-top: 100px; padding-left: 40px; overflow-y: auto;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease, background-color 0.3s ease;
        }
        .mobile-menu.open { opacity: 1; pointer-events: auto; }

        .mobile-menu a {
            font-size: 28px; font-weight: 600; margin-bottom: 24px; color: #1D1D1F; 
            transform: translateX(-20px); transition: transform 0.4s var(--transition), opacity 0.4s, color 0.3s;
            opacity: 0;
            white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;           /* Force width constraint */
    display: block;        /* Required for ellipsis */
    padding-right: 40px;
        }
        .mobile-menu.open a { transform: translateX(0); opacity: 1; }
        .mobile-menu.open a:nth-child(1) { transition-delay: 0.05s; }
        .mobile-menu.open a:nth-child(2) { transition-delay: 0.1s; }
        .mobile-menu.open a:nth-child(3) { transition-delay: 0.15s; }
        .mobile-menu.open a:nth-child(4) { transition-delay: 0.2s; }
        .mobile-menu.open a:nth-child(5) { transition-delay: 0.25s; }
        .mobile-menu.open a:nth-child(6) { transition-delay: 0.30s; }
        .mobile-menu.open a:nth-child(7) { transition-delay: 0.35s; }
        .mobile-menu.open a:nth-child(8) { transition-delay: 0.40s; }

        /* --- HERO SECTION --- */
        .hero {
            text-align: center; padding: 120px 20px 80px; background: #fff;
            border-bottom: 1px solid #E5E5E5; transition: background-color 0.3s ease, border-color 0.3s ease;
            width: 100%; /* Ensure full width */
        }
        .hero h1 {
            font-size: 64px; font-weight: 700; letter-spacing: -1.5px;
            margin-bottom: 15px; color: #000; line-height: 1.05; transition: color 0.3s ease;
            word-wrap: break-word; /* Wrap long text */
        }
        .hero h2 {
            font-size: 24px; font-weight: 400; color: var(--text-secondary);
            margin-bottom: 40px; max-width: 640px; margin-left: auto; margin-right: auto;
            word-wrap: break-word; /* Wrap long text */
        }

        .cta-group { 
            display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; 
            flex-wrap: wrap; /* Allow buttons to wrap on very small screens */
        }
        .btn {
            padding: 12px 26px; border-radius: 980px; font-size: 16px; font-weight: 500;
            cursor: pointer; transition: transform 0.2s; border: none; display: flex; align-items: center; gap: 6px;
            white-space: nowrap; /* Prevent button text breaking */
        }
        .btn:active { transform: scale(0.96); }
        .btn-primary { background: var(--accent); color: white; }
        .btn-secondary { background: transparent; color: var(--accent); border: 1px solid rgba(0,102,204,0.3); }

        /* --- BENTO GRID --- */
        .bento-section { padding: 80px 20px; max-width: 1080px; margin: 0 auto; width: 100%; }
        .bento-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Adjusted minmax for better mobile fit */
            gap: 30px; 
        }
        
        .card {
            background: var(--bg-card); border-radius: var(--radius-lg); padding: 40px;
            box-shadow: var(--shadow-lg); height: 500px; display: flex; flex-direction: column;
            overflow: hidden; transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease; border: 1px solid var(--border-color);
        }
        .card:hover { transform: translateY(-8px); }
        .card-content h3 { font-size: 32px; font-weight: 700; margin: 0 0 10px 0; word-wrap: break-word; }
        .card-content p { font-size: 19px; color: var(--text-secondary); margin: 0; line-height: 1.4; word-wrap: break-word; }
        
        .card-visual { margin-top: 40px; flex-grow: 1; border-radius: 18px; position: relative; overflow: hidden; }
        .visual-simu { background: #F5F5F7; display: flex; align-items: flex-end; justify-content: center; transition: background-color 0.3s ease; }
        body.dark-mode .visual-simu { background: #111; }
        
        .mock-phone {
            width: 220px; height: 100%; background: #000; border-radius: 35px 35px 0 0;
            border: 8px solid #222; border-bottom: none;
            overflow: hidden; position: relative; transition: border-color 0.3s ease;
        }
        .visual-build { background: linear-gradient(135deg, #0071E3, #40C4FF); display: flex; align-items: center; justify-content: center; }
        .mock-window {
            width: 90%; height: 80%; background: rgba(255,255,255,0.2); backdrop-filter: blur(20px);
            border-radius: 12px; border: 1px solid rgba(255,255,255,0.3); padding: 20px;
            color: white; font-family: monospace; font-size: 13px;
            overflow: hidden; /* Prevent mock content spill */
        }

        /* --- DOCS --- */
        .docs-container {
            display: grid; grid-template-columns: 240px 1fr; gap: 60px;
            max-width: 1080px; margin: 60px auto; padding: 0 20px; width: 100%;
        }
        /* FIXED SIDEBAR */
        .docs-sidebar { 
            position: sticky; 
            top: 80px; /* Offset below navbar */
            align-self: start; 
            height: fit-content;
            max-height: calc(100vh - 100px);
            overflow-y: auto;
        }
        
        .docs-sidebar h4 {
            font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary);
            margin-bottom: 20px; font-weight: 600;
        }
        .docs-sidebar a { display: block; padding: 6px 0; color: var(--text-primary); font-size: 14px; opacity: 0.7; transition: color 0.3s ease; }
        .docs-sidebar a:hover, .docs-sidebar a.active { opacity: 1; color: var(--accent); }

        .doc-content { min-width: 0; /* Critical for grid child text wrapping */ }
        .doc-content h1 { font-size: 44px; margin: 0 0 20px; letter-spacing: -0.5px; word-wrap: break-word; }
        .doc-lead { font-size: 21px; color: var(--text-secondary); margin-bottom: 50px; line-height: 1.5; word-wrap: break-word; }
        .doc-block { margin-bottom: 60px; scroll-margin-top: 100px; }
        .doc-block h3 { font-size: 24px; margin-bottom: 15px; border-bottom: 1px solid #E5E5E5; padding-bottom: 10px; transition: border-color 0.3s ease; word-wrap: break-word; }
        
        .code-box {
            background: var(--code-bg); color: #fff; padding: 20px; border-radius: 12px;
            font-family: 'SF Mono', monospace; font-size: 13px; line-height: 1.6;
            margin: 20px 0; overflow-x: auto; /* Allow code block horizontal scroll */
            white-space: pre; /* Preserve formatting */
        }
        .hl-k { color: #FF7AB2; } 
        .hl-f { color: #66D9EF; } 
        .hl-s { color: #E6DB74; } 
        .hl-c { color: #75715E; } 

        /* --- VERIFIED HERO --- */
        .verified-hero {
            background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);
            color: white; padding: 40px; border-radius: 24px; display: flex;
            align-items: center; gap: 32px; margin-top: 30px;
            flex-wrap: wrap; /* Allow wrapping on mobile */
        }
        .v-badge-large {
            width: 80px; height: 80px; background: #007AFF; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; flex-shrink: 0;
            box-shadow: 0 0 40px rgba(0,122,255,0.4);
        }
        .v-content { min-width: 0; /* Allow text wrap in flex child */ }
        .v-content h4 { font-size: 24px; font-weight: 700; margin: 0 0 10px 0; word-wrap: break-word; }
        .v-content p { color: #a1a1a6; margin: 0 0 20px 0; font-size: 16px; word-wrap: break-word; }

        /* --- FOOTER --- */
        footer {
            margin-top: auto; background: #F5F5F7; padding: 40px 20px;
            text-align: center; border-top: 1px solid #D2D2D7; font-size: 12px; color: var(--text-secondary);
            transition: background-color 0.3s ease, border-color 0.3s ease;
            width: 100%;
        }
        .footer-nav span { margin: 0 10px; cursor: pointer; color: var(--text-primary); transition: color 0.3s ease; display: inline-block; }
        .footer-nav span:hover { color: var(--accent); }

        /* --- TEXT PAGE --- */
        .text-page { max-width: 760px; margin: 80px auto; padding: 0 24px; width: 100%; }
        .text-page h1 { font-size: 40px; font-weight: 700; margin-bottom: 30px; word-wrap: break-word; }
        .text-page h2 { font-size: 24px; font-weight: 600; margin: 40px 0 15px; border-bottom: 1px solid #E5E5E5; padding-bottom: 10px; transition: border-color 0.3s ease; word-wrap: break-word; }
        .text-page p { font-size: 17px; line-height: 1.6; color: #333; margin-bottom: 20px; transition: color 0.3s ease; word-wrap: break-word; }
        .text-page ul { list-style: disc; margin-left: 20px; margin-bottom: 20px; }
        .text-page li { margin-bottom: 8px; font-size: 17px; color: #333; transition: color 0.3s ease; word-wrap: break-word; }
        .info-box { background: #F2F2F7; padding: 20px; border-radius: 12px; font-size: 15px; color: #555; margin-bottom: 30px; transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; word-wrap: break-word; }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .navbar { height: 56px; }
            .nav-links-desktop { display: none; }
            .hamburger { display: flex; }
            .hero h1 { font-size: 36px; /* Smaller font for mobile */ }
            .bento-grid, .docs-container { grid-template-columns: 1fr; }
            .docs-sidebar { display: none; }
            .card { height: auto; min-height: 450px; } /* Auto height for content flexibility */
            .verified-hero { flex-direction: column; text-align: center; }
            .v-content { width: 100%; }
            .text-page { padding: 0 20px; margin: 40px auto; }
            .bento-section { padding: 40px 20px; }
        }
		
		
		/* FORCE OVERRIDE for Info Box in Dark Mode */
body.dark-mode .info-box {
    background-color: #1C1C1E !important;
    border: 1px solid #333 !important;
    color: #E5E5E5 !important;
}

/* Ensure links inside the info box are visible */
body.dark-mode .info-box a {
    color: var(--accent) !important;
}



/* --- SUPPORT SECTION STYLES --- */
.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-top: 40px;
}

.feature-item {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 18px;
    padding: 30px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.feature-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.feature-icon {
    width: 48px; height: 48px;
    background: rgba(0,102,204,0.1); /* Accent tint */
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    color: var(--accent);
    margin-bottom: 20px;
}
body.dark-mode .feature-icon { background: rgba(10,132,255,0.15); }

.feature-item h3 { font-size: 20px; font-weight: 600; margin: 0 0 10px 0; }
.feature-item p { font-size: 15px; color: var(--text-secondary); margin: 0; line-height: 1.5; }

/* --- WARNING / ALERT BOX --- */
.alert-box {
    background: #FFF4F4;
    border: 1px solid #FFDCDC;
    border-radius: 12px;
    padding: 20px;
    display: flex; gap: 15px;
    margin: 30px 0;
}
body.dark-mode .alert-box { background: rgba(255, 59, 48, 0.1); border-color: rgba(255, 59, 48, 0.2); }

.alert-icon { color: #FF3B30; flex-shrink: 0; margin-top: 2px; }
.alert-content h4 { color: #FF3B30; margin: 0 0 5px 0; font-size: 16px; font-weight: 600; }
.alert-content p { margin: 0; font-size: 14px; color: var(--text-primary); opacity: 0.9; }

/* --- PRO TIP BOX --- */
.pro-tip {
    background: rgba(52, 199, 89, 0.1);
    border: 1px solid rgba(52, 199, 89, 0.2);
    border-radius: 12px;
    padding: 20px;
    margin: 30px 0;
}
.pro-tip strong { color: #34C759; font-size: 15px; text-transform: none}
.pro-tip p { margin: 0; font-size: 15px; color: var(--text-primary); }


/* --- MOBILE DOCS SIDEBAR --- */
.mobile-docs-toggle {
    display: none;
    position: fixed; bottom: 30px; right: 25px;
    background: var(--accent); color: white;
    border: none; padding: 12px 24px; border-radius: 50px;
    font-size: 15px; font-weight: 600; 
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    z-index: 2000; cursor: pointer;
    backdrop-filter: blur(10px);
    transition: transform 0.2s;
}
.mobile-docs-toggle:active { transform: scale(0.95); }

.mobile-sidebar-overlay {
    display: none; position: fixed; inset: 0; 
    background: rgba(0,0,0,0.4); backdrop-filter: blur(3px);
    z-index: 2009; opacity: 0; transition: opacity 0.3s;
}

/* Close Button (Default Hidden) */
.sidebar-close-btn { display: none; }

@media (max-width: 768px) {
    /* Show Toggle Button */
    .mobile-docs-toggle { display: flex; align-items: center; gap: 8px; }

    /* CLOSE BUTTON STYLE */
    .sidebar-close-btn {
        display: flex;
        position: absolute; top: 15px; right: 15px;
        background: transparent; border: none;
        color: var(--text-primary); cursor: pointer;
        padding: 8px; border-radius: 50%;
        z-index: 2012;
    }
    .sidebar-close-btn:active { background: rgba(0,0,0,0.1); }

    /* --- MOBILE SIDEBAR (NUCLEAR FIX) --- */
    .docs-sidebar {
        display: block !important;
        
        /* 1. Force Fixed Positioning to break out of all containers */
        position: fixed !important;
        
        /* 2. Anchor to ALL corners to force full stretch */
        top: 0 !important;
        left: 0 !important;
        bottom: 0 !important;
        height: 100% !important; /* Fallback */
        height: 100dvh !important; /* Modern Mobile Viewport Height */
        
        /* 3. RESET DESKTOP CONSTRAINTS (Crucial) */
        width: 280px !important;
        max-height: none !important; /* Kills the calc(100vh - 100px) limit */
        margin: 0 !important;
        border: none !important;
        border-radius: 0 !important;
        
        /* 4. Visuals & Layering */
        background: var(--bg-card) !important;
        z-index: 9999 !important; /* Sits on top of EVERYTHING */
      /*  box-shadow: 5px 0 30px rgba(0,0,0,0.2) !important; */
        
        /* 5. Animation State */
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        
        /* 6. Content Scrolling */
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
        padding: 80px 24px 100px !important; /* Extra bottom padding for scrolling space */
    }

    /* Active State */
    .docs-sidebar.active {
        transform: translateX(0) !important;
    }
    
    /* Overlay */
    .mobile-sidebar-overlay.active {
        display: block !important;
        opacity: 1 !important;
        z-index: 9998 !important; /* Just below the sidebar */
    }
}





/* --- SEARCH VIEW STYLES --- */
/* --- SEARCH VIEW STYLES --- */
.search-hero-section {
    padding: 100px 20px 60px;
    text-align: center;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border-color);
}
.search-hero-section h1 { font-size: 48px; font-weight: 700; margin-bottom: 10px; }
.search-hero-section p { font-size: 20px; color: var(--text-secondary); margin-bottom: 40px; }

.big-search-wrapper {
    max-width: 600px; margin: 0 auto; position: relative;
    display: flex; align-items: center;
}
.big-search-wrapper input {
    width: 100%; 
    /* 60px Right Padding ensures text doesn't overlap the button */
    padding: 18px 60px 18px 54px;
    font-size: 19px; border-radius: 16px; border: none;
    background: #F2F2F7; color: var(--text-primary);
    outline: none; transition: box-shadow 0.2s, background 0.2s;
}
.big-search-wrapper input:focus {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(0,122,255,0.3);
}
body.dark-mode .big-search-wrapper input { background: #1C1C1E; border: 1px solid #333; }
body.dark-mode .big-search-wrapper input:focus { background: #000; border-color: #007AFF; }

.search-icon {
    position: absolute; left: 20px; color: var(--text-secondary); pointer-events: none;
}

#search-share-btn {
    position: absolute; right: 12px;
    background: var(--bg-card); border: 1px solid var(--border-color);
    width: 36px; height: 36px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; opacity: 0; pointer-events: none;
    transition: opacity 0.2s, transform 0.2s, background 0.2s; color: var(--accent);
    z-index: 5;
}
#search-share-btn.visible { opacity: 1; pointer-events: auto; }
#search-share-btn:active { transform: scale(0.9); }
#search-share-btn:hover { background: rgba(0,122,255,0.1); }

/* Results Grid */
.search-results-container {
    max-width: 800px; margin: 0 auto; padding: 40px 20px; min-height: 400px;
}

.result-category-header {
    font-size: 13px; font-weight: 600; text-transform: uppercase;
    color: var(--text-secondary); margin: 30px 0 15px 0; letter-spacing: 0.5px;
}

.result-card {
    background: var(--bg-card); padding: 20px; border-radius: 14px;
    margin-bottom: 15px; border: 1px solid var(--border-color);
    cursor: pointer; transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
    display: flex; flex-direction: column; gap: 5px;
}
.result-card:hover {
    transform: translateY(-2px); border-color: var(--accent);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}
.result-card h4 { margin: 0; font-size: 17px; font-weight: 600; color: var(--accent); }
.result-card p { margin: 0; font-size: 14px; color: var(--text-primary); opacity: 0.8; line-height: 1.5; }
.result-path { font-size: 11px; color: var(--text-secondary); margin-bottom: 4px; }

/* Empty State & Tags */
.empty-search-state { text-align: center; color: var(--text-secondary); padding-top: 40px; }
.quick-tags { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
.quick-tags span {
    background: var(--bg-card); border: 1px solid var(--border-color);
    padding: 8px 16px; border-radius: 20px; font-size: 14px; cursor: pointer;
    transition: all 0.2s;
}
.quick-tags span:hover { background: var(--accent); color: white; border-color: var(--accent); }

/* --- TOAST NOTIFICATION (New) --- */
#toast-container {
    position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
    z-index: 10000; display: flex; flex-direction: column; gap: 10px; pointer-events: none;
}
.toast-msg {
    background: rgba(0, 0, 0, 0.8); color: white;
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    padding: 10px 20px; border-radius: 50px; font-size: 14px; font-weight: 500;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: flex; align-items: center; gap: 8px;
    animation: toastIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
body.dark-mode .toast-msg { background: rgba(255, 255, 255, 0.9); color: black; }
@keyframes toastIn {
    from { opacity: 0; transform: translateY(20px) scale(0.9); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes toastOut {
    to { opacity: 0; transform: translateY(-10px) scale(0.95); }
}


/* Container for the "More" button */
.nav-dropdown-container {
    position: relative;
    display: flex;
    align-items: center;
    height: 100%;
    cursor: pointer;
}

/* The "More" text */
.nav-more-trigger {
    font-size: 12px;
    color: #333;
    transition: color 0.3s;
}
.nav-dropdown-container:hover .nav-more-trigger { color: var(--accent); }

/* The Dropdown Menu Box */
.nav-dropdown-menu {
    position: absolute;
    top: 100%; /* Directly below */
    right: 0;
    width: 200px; /* Fixed width */
    max-height: 400px;
    overflow-y: auto; /* Scrollable if too many items */
    background: var(--bg-nav);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    padding: 10px;
    display: none; /* Hidden by default */
    flex-direction: column;
    gap: 5px;
}

/* Show on Hover */
.nav-dropdown-container:hover .nav-dropdown-menu {
    display: flex;
}

/* Links inside dropdown */
.nav-dropdown-menu a {
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 13px;
    color: var(--text-primary);
    text-decoration: none;
    transition: background 0.2s;
}
.nav-dropdown-menu a:hover {
    background: rgba(0,0,0,0.05);
    color: var(--accent);
}
body.dark-mode .nav-dropdown-menu a:hover { background: rgba(255,255,255,0.1); }

body.dark-mode .nav-more-trigger {
    color: #E5E5E5;              /* Light Text for "More" */
}


    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-logo" onclick="switchView('home')">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M12.9,2.6c-0.2-0.5-0.9-0.5-1.1,0L9.4,7.8c-0.1,0.2-0.3,0.3-0.5,0.3L3.7,8.6c-0.5,0.1-0.7,0.7-0.4,1.1l3.9,3.5 c0.1,0.1,0.2,0.3,0.2,0.5l-1.1,5.3c-0.1,0.5,0.4,0.9,0.9,0.6l4.7-2.7c0.2-0.1,0.4-0.1,0.6,0l4.7,2.7c0.5,0.3,1-0.1,0.9-0.6l-1.1-5.3 c0-0.2,0-0.4,0.2-0.5l3.9-3.5c0.4-0.3,0.2-1-0.4-1.1l-5.2-0.5C14.7,7.8,14.5,7.7,14.4,7.5L12.9,2.6z"/></svg>
                iOS Simu Ecosystem
            </div>
            
            <div class="nav-links-desktop">
    <a onclick="switchView('home')" id="link-home" class="active">Overview</a>
    <a onclick="switchView('search'); triggerSearch('')" id="link-search">Search</a>
    
    
    
    <a onclick="switchView('docs')" id="link-docs">Documentation</a>
    
    <a onclick="switchView('support')" id="link-support">Support Center</a>
    
    
    
    <div class="nav-dropdown-container">
        <span class="nav-more-trigger">More ▾</span>
        <div class="nav-dropdown-menu">
            
            <a onclick="window.open('appbuilder.html', '_blank')">App Builder</a>
            <a onclick="window.open('ios-simu-appstore.html', '_blank')">Simulator ↗</a>
            
            <a onclick="window.open('appstore-web.html', '_blank')">App Store Web</a>
            
        </div>
    </div>
    
    <a class="dm-toggle" onclick="toggleDarkMode()">Dark Mode</a>
    
    
</div>

            <!-- 2-BAR HAMBURGER -->
            <div class="hamburger" onclick="toggleMenu()">
                <div class="line"></div>
                <div class="line"></div>
            </div>
        </div>
    </nav>

<div class="mobile-menu" id="mobile-menu">
    <a onclick="mobileNavigate('home')">Overview</a>
    
    <a onclick="switchView('search'); triggerSearch('')">Search</a>
    
    <a onclick="mobileNavigate('docs')">Documentation</a>
    <a onclick="mobileNavigate('support')">Support Center</a> <a onclick="window.open('appbuilder.html', '_blank')">App Builder</a>
    <a onclick="window.open('ios-simu-appstore.html', '_blank')">Simulator</a>
    <a onclick="window.open('appstore-web.html', '_blank')">App Store Web</a>
    <a onclick="toggleDarkMode()">Dark Mode</a>
</div>

    <!-- HOME VIEW -->
    <div id="view-home" class="view-section active">
        <section class="hero">
            <h1>The Ultimate Web OS.</h1>
            <h2>Create, simulate, and deploy powerful web apps directly in the browser. Zero install required.</h2>
            <div class="cta-group">
                <button class="btn btn-primary" onclick="window.open('ios-simu-appstore.html', '_blank')">Launch Simulator</button>
                <button class="btn btn-secondary" onclick="window.open('appbuilder.html', '_blank')">Open App Builder</button>
                
                <button class="btn btn-secondary" onclick="window.open('appstore-web.html', '_blank')" >
            Launch Web Store
        </button>
            </div>
            <p style="font-size: 13px; color: var(--text-secondary);">v2.0 • HTTPS Required</p>
        </section>

        <section class="bento-section">
            <div class="bento-grid">
                <div class="card">
                    <div class="card-content">
                        <h3>iOS Simulator</h3>
                        <p>Pixel-perfect web simulation with Dynamic Island and fluid gestures. A faithful recreation of the mobile experience.</p>
                    </div>
                    <div class="card-visual visual-simu">
                        <div class="mock-phone">
                            <div style="background:url('https://images.unsplash.com/photo-1696429175928-793a1cdef1d3?w=400') center/cover; width:100%; height:100%;"></div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-content">
                        <h3>App Builder</h3>
                        <p>Simple drag-and-upload platform to manage, and publish apps to the ecosystem. Support for URL embeds and direct HTML uploads.</p>
                    </div>
                    <div class="card-visual visual-build">
                        <div class="mock-window">
                            &lt;app&gt;<br>&nbsp;&nbsp;&lt;name&gt;MyApp&lt;/name&gt;<br>&nbsp;&nbsp;&lt;publish&gt;true&lt;/publish&gt;<br>&lt;/app&gt;
                        </div>
                    </div>
                </div>
                
                
                <!-- Insert inside <div class="bento-grid"> -->
<div class="card">
    <div class="card-content">
        <h3>App Store Web</h3>
        <p>Browse the full app catalog, search via URL parameters, and generate shareable deep links without launching the full OS.</p>
        <!-- Button to launch -->
        <button class="btn btn-secondary" onclick="window.open('appstore-web.html', '_blank')" style="margin-top: 20px; width: fit-content;">
            Launch Web Store
        </button>
    </div>
    <!-- Visual Representation -->
    <div class="card-visual" style="background: linear-gradient(135deg, #5E5CE6, #BF5AF2); display: flex; align-items: center; justify-content: center;">
        <div class="mock-window" style="height: 60%; width: 70%; background: rgba(255,255,255,0.95); box-shadow: 0 10px 30px rgba(0,0,0,0.2); color: #000;">
            <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
                <div style="width:20px; height:20px; background:#007AFF; border-radius:5px;"></div>
                <span style="font-weight:600; font-size:14px;">Store</span>
            </div>
            <div style="width:100%; height:8px; background:#f2f2f7; border-radius:4px; margin-bottom:8px;"></div>
            <div style="width:70%; height:8px; background:#f2f2f7; border-radius:4px;"></div>
        </div>
    </div>
</div>
                
            </div>
        </section>
    </div>

    <!-- DOCS VIEW -->
    <div id="view-docs" class="view-section">
        
        <button class="mobile-docs-toggle" onclick="toggleDocsSidebar()">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h7"></path></svg>
            Topics
        </button>
        <div class="mobile-sidebar-overlay" onclick="toggleDocsSidebar()"></div>

        <div class="docs-container">
            <aside class="docs-sidebar" id="docs-sidebar">
                
                <button class="sidebar-close-btn" onclick="toggleDocsSidebar()">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                
                <h4>Documentation</h4>
<a href="#doc-start" class="active">Getting Started</a>

<a href="#doc-builder">App Builder Guide</a>

             <a href="#doc-deploy">Deployment</a>
                <a href="#doc-verify">Verification</a>
                <a href="#doc-audio">Audio Manager</a> 
                <a href="#doc-api">System APIs</a>
                <a href="#doc-advanced">Advanced Config</a>
                <a href="#doc-island">Dynamic Island</a>
                <a href="#doc-settings">System Settings</a>
                
                <a href="#doc-mods">System Mods (Root)</a> 
                
                
                <a href="#doc-iap">IAP Packages</a>
                
            </aside>
            
            <main class="doc-content">
                <h1>Documentation</h1>
                <p class="doc-lead">Everything you need to integrate with the iOS Web Ecosystem.<BR><BR>NOTE: More docs may be adding soon!</p>

                <div id="doc-start" class="doc-block">
                    <h3>Getting Started</h3>
                    <p>The iOS Ecosystem is built on a host-guest architecture. The Simulator acts as the Host OS, while individual apps run as Guests inside sandboxed iframes. This ensures security and isolation while allowing controlled communication via our API.</p>
                    <p>To begin, open the <strong>App Builder</strong> and choose one of two methods:</p>
                    <ul>
                        <li><strong>URL Embed:</strong> Best for existing web apps (e.g., games, tools hosted on Netlify/Vercel).</li>
                        <li><strong>HTML Upload:</strong> Best for single-file widgets or simple tools you want to host directly within the ecosystem.</li>
                    </ul>
                </div>
                
                
                
                
<div id="doc-builder" class="doc-block">
    <h3>App Builder Guide</h3>
    <p>The <strong>App Builder</strong> is the command center for the ecosystem. It allows you to create, update, and manage your applications directly from the browser.</p>

    <div class="feature-grid" style="margin-bottom: 30px;">
        <div class="feature-item">
            <div class="feature-icon" style="color:#FF9500;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
            </div>
            <h3>Create & Edit</h3>
            <p>Manage metadata, icons, and source code. Updates are pushed instantly to all users.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon" style="color:#34C759;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
            </div>
            <h3>Health Monitor</h3>
            <p>View real-time status of your apps, including Shadow Ban warnings and report counts.</p>
        </div>
    </div>

    <h4>1. Choosing an App Type</h4>
    <p>The ecosystem supports three distinct architectures. Choose the one that fits your permission needs:</p>

    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:20px; margin-bottom:20px;">
        
        <div style="background:var(--bg-body); padding:20px; border-radius:12px; border:1px solid var(--border-color);">
            <strong style="color:#007AFF; font-size:16px;">1. URL Embed (Standard)</strong>
            <p style="font-size:14px; color:var(--text-secondary); margin-top:8px;">
                Best for existing web apps (Vercel, Netlify) that need full internet access.
            </p>
            <ul style="font-size:13px; margin-bottom:0; padding-left:16px;">
                <li>Full Internet Access</li>
                <li>Standard Permissions</li>
                <li>Instant Updates via Host</li>
            </ul>
        </div>

        <div style="background:var(--bg-body); padding:20px; border-radius:12px; border:1px solid var(--border-color);">
            <strong style="color:#FF9500; font-size:16px;">2. Legacy HTML (Lite)</strong>
            <p style="font-size:14px; color:var(--text-secondary); margin-top:8px;">
                Best for simple offline tools, calculators, or games with no server.
            </p>
            <ul style="font-size:13px; margin-bottom:0; padding-left:16px;">
                <li><strong>No Major Permissions</strong></li>
                <li>Strict Sandbox (High Security)</li>
                <li>Runs entirely in-browser</li>
            </ul>
        </div>

        <div style="background:rgba(52, 199, 89, 0.1); padding:20px; border-radius:12px; border:1px solid #34C759;">
            <strong style="color:#34C759; font-size:16px;">3. Native App (System)</strong>
            <p style="font-size:14px; color:var(--text-primary); margin-top:8px;">
                For system utilities (Settings, Launchers) that modify the Host OS.
            </p>
            <ul style="font-size:13px; margin-bottom:0; padding-left:16px;">
                <li><strong>Root / System Access</strong></li>
                <li>Can Inject Mods</li>
                <li><span style="background:#34C759; color:white; padding:1px 6px; border-radius:4px; font-size:10px; font-weight:bold; vertical-align:middle;">TRUSTED BADGE REQUIRED</span></li>
            </ul>
        </div>
    </div>

    <div class="info-box" style="border-left: 4px solid #FF9500; background: rgba(255, 149, 0, 0.1);">
        <strong>Note:</strong> <strong>HTTPS & URL Apps</strong> may also require a <strong>Trusted Badge</strong> as they too can offer <strong>System-Level Customization</strong> and <strong>Mods</strong>.
    </div>

    <h4>2. Creating an App</h4>
    <div class="info-box">
        <ol style="margin:0; padding-left:20px; line-height:1.8;">
            <li>Open the <a href="appbuilder.html" target="_blank" style="color:var(--accent);">App Builder</a> and sign in.</li>
            <li>Click the large <strong>(+) Create App</strong> button on the dashboard.</li>
            <li><strong>Metadata:</strong> Enter a unique App Name, a short description, and some comma separated tags to make users find your app easily (optional).</li>
            
            <li><strong>Analytics:</strong> You can choose to enable or disable analytics for your app. You can also set them later.</li>
            
            <li><strong>Icon:</strong> Provide a direct URL to a square image (PNG/JPG).</li>
            <li><strong>Source Code:</strong> Select your method based on the types above:
    <ul style="margin-top:5px; color:var(--text-secondary);">
        <li><em>Embed URL:</em> Paste your https:// link.</li>
        <li><em>Code Upload:</em> Paste raw HTML. (Select "Native" checkbox only if you have verification).</li>
    </ul>
</li>
            <li>Click <strong>Publish</strong>. Your app is now live in the Store!</li>
        </ol>
    </div>

    <h4>3. Updating & Maintaining</h4>
    <p>You can push updates to your app at any time without changing the App ID.</p>
    <ul>
        <li><strong>To Update:</strong> Click the <strong>Edit (Pencil)</strong> icon on your app card. Modify the code or URL, then click <strong>Save Changes</strong>. Users will see the new version the next time they launch the app.</li>
        <li><strong>To Delete:</strong> Click the <strong>Delete (Trash)</strong> icon. <strong style="color:var(--danger);">Warning: This is permanent.</strong></li>
    </ul>

    <h4>4. Developer Verification</h4>
    <p>To publish <strong>Native Apps</strong> or receive the "Verified" tick, you must request a status upgrade.</p>
    <div class="alert-box" style="margin-top:10px;">
        <div class="alert-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
        </div>
        <div class="alert-content">
            <h4>Native App Restrictions</h4>
            <p>If you try to publish a "Native" app without the <strong>Trusted Badge</strong>, it will not work as expected on the simulator environment. Please contact an Admin via GitHub Issues to apply for Trusted Status.</p>
        </div>
    </div>
</div>
                
                
                
                

                <div id="doc-deploy" class="doc-block">
                    <h3>Deployment & Security</h3>
                    <p>Because the ecosystem uses advanced browser features like Service Workers and cross-origin iframe communication, secure contexts are mandatory.</p>
                    <div class="info-box">
                        <strong>Requirement:</strong> Your Simulator and App Builder must be hosted on an <strong>HTTPS</strong> domain. Local `file://` protocols will block necessary APIs.
                    </div>
                </div>

        <div id="doc-verify" class="doc-block">
                    <h3>App Store Verification</h3>
                    <p style="margin-bottom:30px;">Stand out in the App Store with our verification badges. These badges signify trust, reliability, and quality to users.</p>

                    <!-- TWO-COLUMN BADGE GRID -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        
                        <!-- 1. MEMBER BADGE (Blue Line) -->
                        <div style="background: var(--bg-body); padding: 24px; border-radius: 18px; border: 1px solid var(--border-color); transition: background 0.3s;">
                            <div style="display:flex; align-items:center; gap:12px; margin-bottom:15px;">
                                <div style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: rgba(0,122,255,0.1); border-radius: 10px;">
                                    <svg width="24" height="24" viewBox="0 0 12 12" style="display:block;">
                                        <path d="M2.5 6L5 8.5L9.5 3.5" stroke="#007AFF" stroke-width="2" fill="none"></path>
                                    </svg>
                                </div>
                                <h4 style="margin:0; font-size:19px; font-weight:600; color:var(--text-primary);">Trusted Member</h4>
                            </div>
                            <p style="font-size:15px; color:var(--text-secondary); line-height:1.5; margin-bottom:15px;">
                                Awarded to active developers who maintain high-quality applications.
                            </p>
                            <ul style="list-style:none; padding:0; margin:0; font-size:14px; color:var(--text-primary);">
                                <li style="margin-bottom:8px; display:flex; align-items:center; gap:8px;">
                                    <span style="color:#34C759;">✓</span> 5+ Published Apps
                                </li>
                                <li style="margin-bottom:8px; display:flex; align-items:center; gap:8px;">
                                    <span style="color:#34C759;">✓</span> Reliable & Usable Code
                                </li>
                                <li style="display:flex; align-items:center; gap:8px;">
                                    <span style="color:#34C759;">✓</span> Actively Maintained
                                </li>
                            </ul>
                        </div>

                        <!-- 2. OFFICIAL BADGE (Filled Blue) -->
                        <div style="background: linear-gradient(135deg, #007AFF, #0055b3); padding: 24px; border-radius: 18px; color: white; box-shadow: 0 10px 30px rgba(0,122,255,0.25);">
                            <div style="display:flex; align-items:center; gap:12px; margin-bottom:15px;">
                                <div style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.2); border-radius: 50%;">
                                    <svg width="20" height="20" viewBox="0 0 12 12" fill="white" style="display:block;">
                                        <path d="M4.5 9.5L1.5 6.5L2.9 5.1L4.5 6.7L9.1 2.1L10.5 3.5L4.5 9.5Z"></path>
                                    </svg>
                                </div>
                                <h4 style="margin:0; font-size:19px; font-weight:700;">Official Partner</h4>
                            </div>
                            <p style="font-size:15px; opacity:0.9; line-height:1.5; margin-bottom:15px;">
                                The highest tier for ecosystem leaders and core contributors.
                            </p>
                            <ul style="list-style:none; padding:0; margin:0; font-size:14px; opacity:0.95;">
                                <li style="margin-bottom:8px; display:flex; align-items:center; gap:8px;">
                                    <span>★</span> 10+ Apps with 99% Uptime
                                </li>
                                <li style="margin-bottom:8px; display:flex; align-items:center; gap:8px;">
                                    <span>★</span> Project Contributor
                                </li>
                                <li style="display:flex; align-items:center; gap:8px;">
                                    <span>★</span> Trusted Friend ;)
                                </li>
                            </ul>
                        </div>

                    </div>
                    
                    <div style="margin-top:25px; font-size:14px; color:var(--text-secondary); text-align:center;">
                        To apply, open a GitHub issue with the tag <code style="background:var(--bg-body); border:1px solid var(--border-color); padding:2px 6px; border-radius:4px; font-family:monospace;">Verification Request</code>.
                        <br><br>
                        	NOTE: Criteria for being verified may change without notice. Violation of our App Store terms of use or developer responsibilities agreement can result in denial or complete removal of verification respectively.
                      
                    </div>
                </div>







<div id="doc-audio" class="doc-block">
                    <h3>Audio Focus Manager</h3>
                    <p>To prevent audio overlap (e.g., Spotify playing over a Game), the ecosystem uses an <strong>Audio Focus System</strong>. Apps must request focus before playing sound.</p>
                    
                    <div class="info-box">
                        <strong>Rule:</strong> Only one app can hold "Media Focus" at a time. If a new app requests focus, the previous app receives a <code>REVOKED</code> signal and must pause immediately.
                    </div>

                    <strong>The Client Wrapper</strong>
                    <p>Copy this snippet into your app to automatically handle system requests.</p>
                    <div class="code-box">
<span class="hl-k">const</span> AudioClient = {
    audioElement: <span class="hl-k">null</span>,

    <span class="hl-f">init</span>(audioEl) {
        <span class="hl-k">this</span>.audioElement = audioEl;
        
        <span class="hl-c">// 1. Listen for System Revoke (Pause Command)</span>
        window.<span class="hl-f">addEventListener</span>(<span class="hl-s">'message'</span>, (e) => {
            <span class="hl-k">if</span> (e.data.type === <span class="hl-s">'IOS_AUDIO_REVOKED'</span>) {
                console.<span class="hl-f">log</span>(<span class="hl-s">"System took focus. Pausing..."</span>);
                <span class="hl-k">if</span>(<span class="hl-k">this</span>.audioElement) <span class="hl-k">this</span>.audioElement.<span class="hl-f">pause</span>();
            }
        });

        <span class="hl-c">// 2. Intercept Play to Request Focus</span>
        <span class="hl-k">if</span> (<span class="hl-k">this</span>.audioElement) {
            <span class="hl-k">const</span> originalPlay = <span class="hl-k">this</span>.audioElement.play;
            <span class="hl-k">this</span>.audioElement.play = () => {
                <span class="hl-c">// Ask System permission</span>
                window.parent.<span class="hl-f">postMessage</span>({ type: <span class="hl-s">'IOS_AUDIO_REQUEST'</span> }, <span class="hl-s">'*'</span>);
                <span class="hl-k">return</span> originalPlay.<span class="hl-f">call</span>(<span class="hl-k">this</span>.audioElement);
            };
            
            <span class="hl-c">// 3. Release Focus on Pause</span>
            <span class="hl-k">this</span>.audioElement.onpause = () => {
                window.parent.<span class="hl-f">postMessage</span>({ type: <span class="hl-s">'IOS_AUDIO_RELEASE'</span> }, <span class="hl-s">'*'</span>);
            };
        }
    }
};

<span class="hl-c">// Usage: AudioClient.init(document.getElementById('bg-music'));</span>
                    </div>
                </div>






                <div id="doc-api" class="doc-block">
                    <h3>System APIs</h3>
                    <p>Apps can interact with the host OS to change wallpapers, update icons, or trigger alerts. Here is the standard API reference.</p>
                    
                    <strong>Set Persistent Wallpaper</strong>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">setWallpaper</span>(url) {
   <span class="hl-c">// 1. Save to Parent Storage for persistence</span>
   window.parent.localStorage.<span class="hl-f">setItem</span>(<span class="hl-s">'ios_wallpaper_url'</span>, url);
   
   <span class="hl-c">// 2. Apply immediately to DOM</span>
   <span class="hl-k">const</span> el = window.parent.document.<span class="hl-f">getElementById</span>(<span class="hl-s">'wallpaper'</span>);
   <span class="hl-k">if</span>(el) el.style.backgroundImage = <span class="hl-s">`url('${url}')`</span>;
}
                    </div>

                    <strong>Trigger System Alert</strong>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">showAlert</span>(title, message) {
    <span class="hl-k">if</span>(window.parent.iOS) {
        window.parent.iOS.<span class="hl-f">showAlert</span>(title, message);
    }
}
                    </div>
                </div>

                <div id="doc-advanced" class="doc-block">
                    <h3>Advanced Config & Notifications</h3>
                    <p>Developers can programmatically modify the core appearance and behavior of the Simulator, as well as trigger rich notifications that work even when the app is minimized.</p>

                    <h4>1. Fetching Installed Apps</h4>
                    <p>Retrieve a list of all currently installed apps from the parent context:</p>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">fetchAllApps</span>() {
    <span class="hl-k">if</span> (window.parent === window) <span class="hl-k">return</span> []; <span class="hl-c">// Only works in simulator</span>

    <span class="hl-k">const</span> parentDoc = window.parent.document;
    <span class="hl-k">const</span> apps = [];
    <span class="hl-k">const</span> seen = <span class="hl-k">new</span> <span class="hl-f">Set</span>();

    parentDoc.<span class="hl-f">querySelectorAll</span>(<span class="hl-s">'.app-item'</span>).<span class="hl-f">forEach</span>(el => {
        <span class="hl-k">const</span> name = el.<span class="hl-f">querySelector</span>(<span class="hl-s">'.app-name'</span>)?.innerText.trim();
        <span class="hl-k">const</span> id = el.<span class="hl-f">getAttribute</span>(<span class="hl-s">'data-app-id'</span>) || name;
        <span class="hl-k">const</span> img = el.<span class="hl-f">querySelector</span>(<span class="hl-s">'img'</span>)?.src;

        <span class="hl-k">if</span> (id && !seen.<span class="hl-f">has</span>(id)) {
            seen.<span class="hl-f">add</span>(id);
            apps.<span class="hl-f">push</span>({ id, url: img || <span class="hl-s">''</span> });
        }
    });
    <span class="hl-k">return</span> apps;
}
                    </div>

                    <h4>2. Triggering Notifications (The Bridge)</h4>
                    <p>Apps run in sandboxes (iframes), so they cannot directly access the notification UI. Instead, we use a <strong>Bridge</strong> system. You construct a payload and send it via `postMessage`. The simulator listens for this and adds it to the queue.<br><br><strong>Tip:</strong> If there is a an app listed with the same name as yours, it might cause conflicts. So, you can use <strong>App IDs</strong>, which can be seen in the <strong>Edit </strong>screen of any app you have published using the App Builder. Use this to distinguish even between duplicate app names to avoid overrides.</p>
                    
                    <div class="code-box">
<span class="hl-c">// --- CORE NOTIFICATION FUNCTION ---
// This function uses the exact protocol required by your updated Simulator.</span>
<span class="hl-k">function</span> <span class="hl-f">triggerNotification</span>(title, message) {
    <span class="hl-c">// 1. Check if we are inside the Simulator (iframe)</span>
    <span class="hl-k">if</span> (window.parent === window) {
        console.warn(<span class="hl-s">"Not in simulator: Notification suppressed."</span>);
        <span class="hl-k">return</span>;
    }

    <span class="hl-c">// 2. Construct Payload
    // 'Timer' will be matched by the Simulator to this app's Name or ID.</span>
    <span class="hl-k">const</span> payload = {
        appId: <span class="hl-s">'Timer'</span>, 
        title: title,
        msg: message,
        showAfter: <span class="hl-f">Date</span>.now(), <span class="hl-c">// Immediate</span>
        
        <span class="hl-c">// CRITICAL: Unique ID for De-duplication in the System Service</span>
        uuid: <span class="hl-f">Date</span>.now() + <span class="hl-s">'-'</span> + Math.random().toString(36).substr(2, 9),
        
        <span class="hl-c">// Optional: Custom Sound (Base64 or URL)</span>
        sound: <span class="hl-s">'https://download-apple-sms-ringtones-free.mobilesringtones.com/storage/2018/08/30/24645/24645.mp3'</span>
    };

    <span class="hl-c">// 3. Send via Bridge
    // The Simulator's background service listens for this specific message type.</span>
    window.parent.<span class="hl-f">postMessage</span>({ 
        type: <span class="hl-s">'IOS_NOTIFICATION_QUEUE'</span>, 
        payload: payload 
    }, <span class="hl-s">'*'</span>);
}

<span class="hl-c">// Example Usage:
// triggerNotification('Timer', 'Timer finished!');</span>
                    </div>

                    <h4>3. Injecting Custom Scripts (System Apps)</h4>
                    <p>If you are building a system-level utility (like a Notification Manager), you can inject scripts directly into the host OS context using the `IOS_INJECT_SCRIPT` message type.</p>
                    <div class="code-box">
<span class="hl-k">const</span> SERVICE_CODE = <span class="hl-s">`(function() { console.log('I am running in the Host OS!'); })();`</span>;

window.parent.<span class="hl-f">postMessage</span>({
    type: <span class="hl-s">'IOS_INJECT_SCRIPT'</span>,
    script: SERVICE_CODE
}, <span class="hl-s">'*'</span>);
                    </div>
                </div>

<div id="doc-island" class="doc-block">
                    <h3>Dynamic Island API</h3>
                    <p>Apps can trigger rich notifications on the Dynamic Island. The Island supports compact and expanded modes, live updates, and persistent states (e.g., for timers or music).</p>
                    
                    <strong>Basic Trigger (Compact)</strong>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">notifyIsland</span>() {
    <span class="hl-k">const</span> iconSVG = <span class="hl-s">`&lt;svg ...&gt;&lt;/svg&gt;`</span>; <span class="hl-c">// Your SVG string</span>
    
    window.parent.<span class="hl-f">postMessage</span>({
        type: <span class="hl-s">'IOS_ISLAND_TRIGGER'</span>,
        icon: iconSVG,
        title: <span class="hl-s">'Pizza Tracker'</span>,
        text: <span class="hl-s">'Order #4552 is preparing...'</span>,
        color: <span class="hl-s">'#FF9500'</span>, <span class="hl-c">// Icon color</span>
        mode: <span class="hl-s">'compact'</span>,
        duration: <span class="hl-c">3000</span> <span class="hl-c">// ms</span>
    }, <span class="hl-s">'*'</span>);
}
                    </div>

                    <strong>Persistent Live Activity (Expanded)</strong>
                    <p>Use `duration: 'PERSISTENT'` to keep the island open. You can send subsequent messages to update the text or progress bar live without the island closing.</p>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">startTimer</span>() {
    window.parent.<span class="hl-f">postMessage</span>({
        type: <span class="hl-s">'IOS_ISLAND_TRIGGER'</span>,
        icon: <span class="hl-s">`&lt;svg...&gt;`</span>,
        title: <span class="hl-s">'Timer'</span>,
        text: <span class="hl-s">'14:59 remaining'</span>,
        color: <span class="hl-s">'#FF3B30'</span>,
        mode: <span class="hl-s">'expanded'</span>, <span class="hl-c">// Shows the 'text' field</span>
        duration: <span class="hl-s">'PERSISTENT'</span>
    }, <span class="hl-s">'*'</span>);
}
                    </div>

                    <strong>Dismiss Island</strong>
                    <div class="code-box">
<span class="hl-k">function</span> <span class="hl-f">stopActivity</span>() {
    window.parent.<span class="hl-f">postMessage</span>({
        type: <span class="hl-s">'IOS_ISLAND_DISMISS'</span>
    }, <span class="hl-s">'*'</span>);
}
                    </div>
                </div>

                <div id="doc-settings" class="doc-block">
                    <h3>System Settings Injection</h3>
                    <p>Standard apps are sandboxed. To modify core OS settings (Brightness, Dark Mode, etc.), you must use the <strong>Script Injection Bridge</strong> (`IOS_INJECT_SCRIPT`). This executes code directly in the Host OS context.</p>

                    <strong>Toggle Dark Mode</strong>
                    <div class="code-box">
<span class="hl-k">const</span> SCRIPT = <span class="hl-s">`
    // Execute on Host
    if (window.iOS) {
        // Toggle needs an object with a 'checked' property
        const currentState = window.iOS.isDarkMode;
        window.iOS.toggleDarkMode({ checked: !currentState });
    }
`</span>;

window.parent.<span class="hl-f">postMessage</span>({
    type: <span class="hl-s">'IOS_INJECT_SCRIPT'</span>,
    script: SCRIPT
}, <span class="hl-s">'*'</span>);
                    </div>

                    <strong>Set Brightness</strong>
                    <div class="code-box">
<span class="hl-k">const</span> SCRIPT = <span class="hl-s">`
    if (window.iOS) {
        window.iOS.setBrightness(50); // Value 0-100
    }
`</span>;

window.parent.<span class="hl-f">postMessage</span>({ type: <span class="hl-s">'IOS_INJECT_SCRIPT'</span>, script: SCRIPT }, <span class="hl-s">'*'</span>);
                    </div>

                    <strong>Toggle Connectivity</strong>
                    <p>Available methods: `toggleAirplaneMode`, `toggleWiFi`, `toggleBluetooth`, `toggleTrueTone`.</p>
                    <div class="code-box">
<span class="hl-k">const</span> SCRIPT = <span class="hl-s">`
    if (window.iOS) {
        // Toggle Airplane Mode
        const current = window.iOS.isAirplaneMode;
        window.iOS.toggleAirplaneMode({ checked: !current });
        
        // Toggle Wi-Fi
        window.iOS.toggleWiFi();
    }
`</span>;
                    </div>
                </div>






<div id="doc-mods" class="doc-block">
                    <h3>System Mods & Root Access</h3>
                    <p>The <code>injectMod()</code> API allows an app to execute arbitrary JavaScript directly in the <strong>Host Operating System</strong> context. This is the most powerful and dangerous feature in the ecosystem.</p>

                    <div class="alert-box">
                  <div class="alert-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                        </div>
                        <div class="alert-content">
                            <h4>Root Privilege Required</h4>
                            <p>This API is blocked by default. It only works for:</p>
                            <ul>
                                <li><strong>Sideloaded Apps</strong> (Development / Testing)</li>
                                <li><strong>Trusted System Apps</strong> (Verified by Admins)</li>
                            </ul>
                        </div>
                    </div>

                    <h4>1. How to use injectMod</h4>
                    <p>You pass a string of JavaScript code. The system evaluates this code in the top-level window context, allowing you to modify CSS variables, DOM elements, or system behavior.</p>

                    <strong>Example: Universal Theme Changer</strong>
                    <p>This script injects a style tag into the Host OS to change the background color of the entire Simulator.</p>
                    <div class="code-box">
<span class="hl-k">const</span> THEME_MOD = <span class="hl-s">`
    (function() {
        // 1. Create a Style Tag
        const style = document.createElement('style');
        style.id = 'my-custom-theme';
        style.innerHTML = \`
            :root {
                --bg-body: #1a1a1a !important; 
                --accent: #FF2D55 !important;
                --text-primary: #fff !important;
            }
            .navbar { background: rgba(0,0,0,0.8) !important; }
        \`;
        
        // 2. Remove old version if exists (Prevent duplicates)
        const old = document.getElementById('my-custom-theme');
        if (old) old.remove();

        // 3. Inject into Host Head
        document.head.appendChild(style);
        
        // 4. Notify User
        if(window.iOS) window.iOS.showAlert('Theme Applied', 'Dark Neon Red installed.');
    })();
`</span>;

<span class="hl-c">// Execute the Mod</span>
<span class="hl-k">if</span> (window.parent.iOS) {
    <span class="hl-k">const</span> success = window.parent.iOS.<span class="hl-f">injectMod</span>(THEME_MOD);
    <span class="hl-k">if</span> (!success) {
        console.error(<span class="hl-s">"Mod failed. App may not have Root privileges."</span>);
    }
}
                    </div>

                    <h4>2. Getting "Trusted" Status</h4>
                    <p>Store Apps run in a Restricted Sandbox by default. To distribute a Mod on the App Store, your App ID must be added to the <strong>Trusted List</strong>.</p>
                    <div class="info-box">
                        <strong>Request Process:</strong><br>
                        1. Publish your app with the App Builder.<br>
                        2. Test it thoroughly using the Sideloader.<br>
                        3. Open a <strong>GitHub Issue</strong> or contact an Admin with your <strong>App ID</strong> and source code.<br>
                        4. If approved, your App ID will be whitelisted in the Security Config.
                    </div>

                    <h4>3. Developer Safety Guidelines (Strict)</h4>
                    <p>Violation of these rules will result in immediate <strong>Account Ban</strong> and removal of all your apps.</p>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 10px; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                            <strong>NO MALWARE:</strong> Do not inject scripts that steal data, infinite loop, or crash the browser.
                        </li>
                        <li style="margin-bottom: 10px; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                            <strong>Clean Up:</strong> If your mod changes the UI, provide a way to reset it (e.g., a "Reset to Default" button).
                        </li>
                        <li style="padding: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                            <strong>No Persistence Abuse:</strong> Do not use <code>localStorage</code> to make your mod impossible to remove. Users must be able to fix issues by clearing data or using Safe Mode.
                        </li>
                    </ul>
                    
                    
                    
                    <strong>Console Defense</strong>
                    <p>For security, the Simulator automatically revokes <code>Root</code> privileges when the system is idle. If you try to run `iOS.injectMod()` from the browser console, it will fail. You must open a <strong>Sideloaded App</strong> (which grants temporary Root access) to execute system-level commands.</p>

                </div> <div id="doc-iap" class="doc-block">
    <h3>The .IAP Package System</h3>
    <p>The <strong>iOS App Package (.iap)</strong> is a secure, encrypted file format designed for sharing apps offline. Unlike standard HTML files, .iap packages are tamper-proof and cryptographically signed.</p>

    <div class="feature-grid" style="margin-top: 20px; margin-bottom: 30px;">
        <div class="feature-item">
            <div class="feature-icon" style="color:#007AFF;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            </div>
            <h3>AES-256 Encryption</h3>
            <p>Packages are encrypted using industry-standard AES-GCM. The source code is protected from casual modification.</p>
        </div>
        <div class="feature-item">
            <div class="feature-icon" style="color:#34C759;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg>
            </div>
            <h3>Integrity Check</h3>
            <p>The system calculates a cryptographic hash. If a single byte of the file is altered, the installation will be rejected.</p>
        </div>
    </div>

<h4>How to Use</h4>
    <p>Installing a package is simple and works entirely offline.</p>
    
    <div class="info-box">
        <ol style="margin: 0; padding-left: 20px; line-height: 1.6;">
            <li style="margin-bottom: 5px;">Open the <strong>Sideloader</strong> app.</li>
            <li style="margin-bottom: 5px;">Tap <strong>"Import .iap Package"</strong> at the top of the list.</li>
            <li style="margin-bottom: 5px;">Select the file from your device.</li>
            <li>Review the App Name, Author, and Permissions before confirming.</li>
        </ol>
    </div>

    <h4>Creating Packages</h4>
    <p>Developers can export their apps as .iap files directly from the Sideloader. When editing an app, simply click <strong>"Export .iap Package"</strong>. This bundles the icon, metadata, and source code into a single shareable file.</p>

    <div class="alert-box">
        <div class="alert-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
        </div>
        <div class="alert-content">
            <h4>Safety Advisory</h4>
            <p>While .iap files ensure the code hasn't been tampered with since export, they do not guarantee the original author is trustworthy.</p>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li><strong>Only install packages from trusted sources.</strong></li>
                <li><strong>Never</strong> bypass a "Corrupted Package" warning.</li>
                <li>If an app asks for sensitive permissions immediately after install, uninstall it.</li>
            </ul>
        </div>
    </div>
</div> 
                    
  
                    
                    </main>                  
                    
            
        </div>
    </div>










<div id="view-support" class="view-section">
        
        <button class="mobile-docs-toggle" onclick="toggleSupportSidebar()">
            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h7"></path></svg>
            Topics
        </button>
        <div class="mobile-sidebar-overlay" onclick="toggleSupportSidebar()"></div>

        <div class="docs-container">
            
            <aside class="docs-sidebar" id="support-sidebar">
                <button class="sidebar-close-btn" onclick="toggleSupportSidebar()">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>

                <h4>Support Topics</h4>
                <a href="#sup-start" class="active">Overview</a>
<a href="#sup-safety">Safety & Recovery</a>
<a href="#sup-trust">Trust & Verification</a>
<a href="#sup-sideload">Sideloading</a>
<a href="#sup-features">Features</a>

<a href="#sup-assistive">Assistive Touch</a>
<a href="#sup-display">Display Settings</a>
<a href="#sup-report">Report System</a>


<a href="#sup-github">GitHub & Issues</a> 



<a href="#sup-webstore">App Store Web</a>
            </aside>

            <main class="doc-content">
                <div id="sup-start">
                    <h1>Support Center</h1>
                    <p class="doc-lead">Master your device. Learn about security, recovery tools, and how to verify trusted applications.</p>
                </div>

                <div id="sup-safety" class="doc-block">
                    <h3>Safety & Recovery</h3>
                    <p>The Simulator is built with a "Sandboxed" architecture, but user-generated content can still cause crashes. We have built-in tools to help you recover.</p>
                    <div class="alert-box">
                        <div class="alert-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                        </div>
                        <div class="alert-content">
                            <h4>Emergency: Safe Mode</h4>
                            <p>If an app crashes your simulator or you encounter a "Black Screen of Death," use Safe Mode to disable all modifications.</p>
                            <div style="margin-top:10px;">
                                <strong>How to Activate:</strong><br>
                                Add <code style="background:rgba(0,0,0,0.1); padding:2px 6px; border-radius:4px;">?safe=true</code> to the end of your Simulator URL.
                            </div>
                        </div>
                    </div>
                </div>

                <div id="sup-trust" class="doc-block">
                    <h3>Trust & Verification</h3>
                    <p>To prevent "Copycat" apps, we use a rigorous verification system.</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="feature-icon" style="color:#007AFF;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg>
                            </div>
                            <h3>Trusted System App</h3>
                            <p><strong>Look for:</strong> A Green Shield <span style="color:#34C759"></span> next to the App Name. These apps have Root Privileges.</p>
                        </div>

                        <div class="feature-item">
                            <div class="feature-icon" style="color:#007AFF;">
                                <svg width="24" height="24" viewBox="0 0 12 12" fill="currentColor"><path d="M4.5 9.5L1.5 6.5L2.9 5.1L4.5 6.7L9.1 2.1L10.5 3.5L4.5 9.5Z"/></svg>
                            </div>
                            <h3>Verified Developer</h3>
                            <p><strong>Look for:</strong> A Blue Tick next to the Author Name. Confirms identity, not code safety.</p>
                        </div>
                    </div>
                </div>

                <div id="sup-sideload" class="doc-block">
                    <h3>Sideloading Responsibly</h3>
                    <p>The <strong>Sideloader</strong> app allows you to install <code>.html</code> files directly. This is powerful but risky.</p>
                    <div class="pro-tip">
                        <strong>Safety Checklist</strong>
                        <p>1. Only sideload files from developers you trust.<br>
                        2. Sideloaded apps run with <strong>Restricted Privileges</strong> by default.<br>
                        3. If a sideloaded app asks you to "Run a Script" or "Inject Code," <strong>DENY</strong> it unless you know exactly what the code does.</p>
                    </div>
                </div>

                <div id="sup-features" class="doc-block">
                    <h3>Ecosystem Features</h3>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <h3>Dynamic Island</h3>
                            <p>Supports custom notifications via <code>triggerSystemNotification()</code>.</p>
                        </div>
                        <div class="feature-item">
                            <h3>Settings</h3>
                            <p>Enable dark mode, True Tone, and developer options.</p>
                        </div>
                        <div class="feature-item">
                            <h3>Offline Capable</h3>
                            <p>Native Apps (Sideloaded) are stored in IndexedDB and work without internet.</p>
                        </div>
                    </div>
                </div>


<div id="sup-assistive" class="doc-block">
    <h3>Assistive Touch</h3>
    <p>The Assistive Touch button is a floating navigation tool designed for users who prefer tapping over swiping gestures. It provides instant access to core system functions.</p>

    <div class="feature-grid">
        <div class="feature-item">
            <div class="feature-icon" style="color:#007AFF;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
            </div>
            <h3>Core Actions</h3>
            <p>
                <strong>Home:</strong> Minimizes the active app. If already on the homescreen, it returns you to the first page.<br><br>
                <strong>Back:</strong> Acts as a universal "Close" button for apps, or returns to the previous menu in supported system apps.
            </p>
        </div>

        <div class="feature-item">
            <div class="feature-icon" style="color:#5856D6;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/></svg>
            </div>
            
            <h3>Pro Behavior</h3>
            <p>The button features an <strong>Auto-Hide</strong> system. When inactive, it snaps to the nearest edge and morphs into a discreet sidebar to keep your screen clutter-free.</p>
        </div>
    </div>
    
    <br>

    <div class="info-box">
        <strong>How to Enable:</strong> Open <span style="background:rgba(142, 142, 147, 0.15); padding:2px 6px; border-radius:4px; font-weight:500;">Settings</span> > <strong>Accessibility</strong> and toggle the switch.
    </div>
</div>

<div id="sup-display" class="doc-block">
    <h3>Display & Brightness</h3>
    <p>Control how the simulator looks and reacts to lighting conditions. These settings are simulated using CSS overlays to mimic hardware behavior.</p>

    <h4>Brightness Slider</h4>
    <p>Located in <strong>Settings > Display</strong>, this slider controls the backlight intensity. Lowering it applies a black overlay to the screen, simulating low-light usage without affecting the actual UI rendering.</p>

    <h4>True Tone</h4>
    <p>True Tone technology uses advanced sensors (simulated) to adjust the color and intensity of your display to match the ambient light.</p>
    
    <div class="pro-tip">
        <strong>Why use True Tone?</strong>
        <p>Enabling this feature applies a warm, amber tint to the entire OS. This reduces eye strain during late-night coding or reading sessions within the simulator.</p>
    </div>
</div>








<div class="doc-block" id="sup-report">
    <h3>Community Reporting System</h3>
    <p>We use a decentralized, community-driven moderation system to keep the App Store safe. Here is how it works:</p>
    
    <h4>How to Report an App</h4>
    <p>If you encounter malware, scams, or abusive content, open the app's page in the Store and tap the <strong>Report</strong> button. Your report is encrypted and sent to our secure "Black Box" database.</p>

    <h4>The "Shadow Ban" Protocol</h4>
    <p>To ensure immediate safety, our system uses an automated Tripwire:</p>
    <ul>
        <li>If an app receives <strong>10 or more verified reports</strong> from different users, it is automatically <strong>Shadow Banned</strong>.</li>
        <li>A Shadow Banned app is instantly hidden from the App Store for all users to prevent further installs.</li>
        <li>The developer is notified via the App Builder console.</li>
    </ul>

    <h4>Important Warning: Do Not Abuse</h4>
    <p>This system is designed for safety, not for attacking developers. Please note:</p>
    <ul>
        <li><strong>Spam Reporting is Monitored:</strong> Abusing the report button to target honest developers will result in your device being restricted from the Store.</li>
        <li><strong>False Positives:</strong> If your app was banned by mistake, contact the Admin immediately. We can review the logs and issue a "Pardon" to restore your app and reputation.</li>
    </ul>
    
    <div class="note-box" style="background: rgba(0,113,227,0.1); padding: 15px; border-radius: 12px; margin-top: 15px;">
        <strong>Tip for Developers:</strong> You can check your app's health status in the <a href="#sup-report" onclick="iOS.openApp('builder')">App Builder</a> dashboard at any time.
    </div>
</div>


<div id="sup-github" class="doc-block">
    <h3>GitHub & Issue Tracking</h3>
    <p>The iOS Web Ecosystem is open source. We use GitHub to handle bug reports, feature requests, and moderation appeals.</p>

    <div class="cta-group" style="justify-content:flex-start; margin-bottom:30px;">
        <button class="btn btn-primary" onclick="window.open('https://github.com/AltroWeb/altroweb.github.io/issues', '_blank')">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            Go to Repository
        </button>
    </div>

    <h4>How to Submit an Issue</h4>
    <div class="code-box" style="white-space: normal; font-family: 'Inter', sans-serif;">
        <strong>1. Navigate to Issues:</strong><br>
        Click the button above to open our GitHub Issues page.<br><br>
        
        <strong>2. Choose a Label:</strong><br>
        <span style="background:#d73a49; color:white; padding:2px 6px; border-radius:4px; font-size:12px;">bug</span> - For Simulator crashes or API errors.<br>
        <span style="background:#a2eeef; color:#1a1a1a; padding:2px 6px; border-radius:4px; font-size:12px;">enhancement</span> - For new feature suggestions.<br>
        <span style="background:#e4e669; color:#1a1a1a; padding:2px 6px; border-radius:4px; font-size:12px;">appeal</span> - For moderation requests (Shadow Bans).<br><br>

        <strong>3. Provide Details:</strong><br>
        Be specific. If reporting a bug, include browser version and error logs. If appealing a ban, provide your <strong>App ID</strong> and explanation.
    </div>

    <div class="alert-box">
        <div class="alert-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
        </div>
        <div class="alert-content">
            <h4>Requesting a Pardon</h4>
            <p>If your app was <strong>Shadow Banned</strong> by the automated Tripwire system, you must submit a formal appeal on GitHub.</p>
            <ul style="margin-top:8px;">
                <li>Title your issue: <code>[Appeal] App ID: YourAppID</code></li>
                <li>Explain why the reports were false.</li>
                <li>Admins will review the "Black Box" logs and restore your app if you are innocent.</li>
            </ul>
        </div>
    </div>
</div>




<div id="sup-webstore" class="doc-block">
    <h3>App Store Web</h3>
    <p>The Web Store is a lightweight, browser-based version of the App Store that runs outside the Simulator. It is perfect for quick searching and sharing.</p>
    
    <div class="info-box">
        <strong>URL Parameter Trick:</strong><br>
        You can share a direct link to any app using the <code>?s=</code> parameter.<br>
        <em>Example:</em> <code>/app-store-web.html?s=Calculator</code>
    </div>

    <div class="feature-grid">
        <div class="feature-item">
            <div class="feature-icon" style="color:#007AFF;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
            </div>
            <h3>Smart Sharing</h3>
            <p>Click the <strong>Share</strong> icon on any app to copy a unique deep link to your clipboard.</p>
        </div>
        
        <div class="feature-item">
            <div class="feature-icon" style="color:#34C759;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
            </div>
            <h3>Open in Simulator</h3>
            <p>Found an app you like? Tap <strong>OPEN</strong> to instantly boot the Simulator with that app pre-filtered.</p>
        </div>
    </div>
</div>


            </main>
        </div>
    </div>






    <!-- PRIVACY VIEW -->
    <div id="view-privacy" class="view-section">
        <div class="text-page">
            <h1>Privacy Policy</h1>
            <div class="info-box">Last Updated: January 2026</div>

            <h2>1. Data Collection</h2>
            <p>We believe in privacy by design. The iOS Web Ecosystem does not collect, sell, or analyze your personal data.</p>
            <ul>
                <li><strong>Local Storage:</strong> All app data, settings, and installed apps are stored locally on your device's browser (LocalStorage & IndexedDB). Clearing your browser cache will reset the simulator.</li>
                <li><strong>No Tracking:</strong> We do not use Google Analytics, Facebook Pixels, or any third-party trackers.</li>
            </ul>

            <h2>2. Authentication</h2>
            <p>If you choose to use the App Builder to publish apps, we use Google Firebase for authentication. Your email and password are processed securely by Google. We only store your User ID and Display Name to associate you with your published apps.</p>

            <h2>3. Third-Party Apps</h2>
            <p>Apps installed from the ecosystem's App Store are created by community developers. While they run in sandboxed iframes, we cannot guarantee the privacy practices of every third-party URL you embed. Please review the privacy policies of the individual services you access within the simulator.</p>
        </div>
    </div>
    
    
    
    <!-- TERMS VIEW -->
    <div id="view-terms" class="view-section">
        <div class="text-page">
            <h1>Terms of Service</h1>
            <div class="info-box">Last Updated: January 2026</div>

            <p>By accessing or using the iOS Web Ecosystem ("Platform"), you agree to be bound by these Terms. If you disagree with any part of the terms, you may not access the Platform.</p>

            <h2>1. Acceptable Use Policy</h2>
            <p>The Platform allows users to simulate, build, and distribute web applications. You agree not to misuse the Platform or help anyone else do so.</p>
            <ul>
                <li><strong>Prohibited Content:</strong> You must not publish apps containing hate speech, violence, nudity, illegal activities, or malicious code (malware, phishing).</li>
                <li><strong>Impersonation:</strong> You must not impersonate legitimate entities or misleadingly use trademarks.</li>
                <li><strong>System Abuse:</strong> Do not attempt to bypass sandbox restrictions, exploit API vulnerabilities, or disrupt the Simulator's stability.</li>
            </ul>

            <h2>2. Developer Responsibilities</h2>
            <p>As a developer on the App Store, you are responsible for the content and behavior of your applications.</p>
            <ul>
                <li><strong>Uptime & Quality:</strong> Apps must be functional and perform as described. Broken or deceptive apps may be removed.</li>
                <li><strong>User Privacy:</strong> You must not collect sensitive user data without explicit consent within your app's interface.</li>
            </ul>

            <h2>3. Enforcement & Termination</h2>
            <p>We reserve the right to take action against accounts that violate these terms. Consequences are determined by the severity of the violation:</p>
            <div style="background:var(--bg-card); border:1px solid var(--border-color); border-radius:12px; padding:20px; margin:20px 0;">
                <ul style="margin:0; padding-left:20px;">
                    <li style="margin-bottom:10px;"><strong>Tier 1 (Warning):</strong> App delisting or temporary suspension of publishing rights.</li>
                    <li style="margin-bottom:10px;"><strong>Tier 2 (Verification Removal):</strong> Loss of "Trusted" or "Official" badges for breach of trust.</li>
                    <li><strong>Tier 3 (Account Ban):</strong> Permanent removal of all apps and immediate termination of the developer account.</li>
                </ul>
            </div>
            <p>We may remove any app at any time, for any reason, without prior notice.</p>

            <h2>4. Disclaimer of Warranties</h2>
            <p>The Platform is provided "AS IS" and "AS AVAILABLE" without warranties of any kind. We do not guarantee that the Platform will function uninterrupted or be error-free. You use the Simulator at your own risk.</p>
        </div>
    </div>

    
    

    <!-- ABOUT VIEW -->
    <div id="view-about" class="view-section">
        <div class="text-page">
            <h1>About the Project</h1>
            <p class="doc-lead">An open-source initiative to push the boundaries of what is possible in a modern web browser.</p>

            <h2>The Mission</h2>
            <p>The "iOS Web Ecosystem" started as a challenge: Could we recreate the fluid, responsive, and complex interactions of a mobile operating system using only standard web technologies (HTML, CSS, JavaScript)?</p>
            <p>The result is a comprehensive platform that includes a pixel-perfect Simulator, a functional App Store, and a developer-friendly App Builder.</p>

            <h2>Technology Stack</h2>
            <p>We intentionally avoided heavy frameworks to ensure maximum performance and accessibility.</p>
            <ul>
                <li><strong>Core:</strong> Vanilla JavaScript (ES6+)</li>
                <li><strong>Styling:</strong> Pure CSS3 with extensive use of Flexbox, Grid, and CSS Variables. No Tailwind or Bootstrap.</li>
                <li><strong>Backend:</strong> Google Firebase (Firestore & Auth) for the App Store backend.</li>
                <li><strong>Icons:</strong> SVG and FontAwesome.</li>
            </ul>

            <h2>Community & Contribution</h2>
            <p>This project is open source. We welcome developers to build apps, submit pull requests, and help improve the ecosystem.</p>
            <div class="info-box" style="background:#fff; border:1px solid #E5E5E5;">
                <strong>Contact Us:</strong><br>
                For support, feature requests, or bug reports, please visit our <a href="https://github.com/AltroWeb/altroweb.github.io/tree/main/others" style="color:var(--accent);">GitHub Repository</a>.
            </div>
        </div>
    </div>




<div id="view-search" class="view-section">
    <div class="search-hero-section">
        <h1>Find Anything.</h1>
        <p>Search across documentation, support articles, and features.</p>
        
        <div class="big-search-wrapper">
            <svg onclick="triggerSearch('')" style="pointer-events:auto; cursor:pointer;" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" class="search-icon">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="global-search-input" placeholder="Type here to search" autocomplete="off" spellcheck="false">
            
            <button id="search-share-btn" onclick="shareSearchQuery()" title="Copy Link to Search">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
            </button>
        </div>
    </div>

    <div class="search-results-container" id="search-results-area">
        <div class="empty-search-state">
            
            <h3>Type to search...</h3>
        </div>
    </div>
</div>

<div id="toast-container"></div>





    <footer>
        <div class="footer-nav">
            <span onclick="switchView('privacy')">Privacy Policy</span>
            <span onclick="switchView('terms')">Terms</span> <!-- terms -->
             
            <span onclick="switchView('about')">About Us</span>
        </div>
        <div style="margin-top:20px;">Copyright © 2026 iOS Web Ecosystem. Not affiliated with Apple Inc.</div>
    </footer>

    <script>
        // Init Dark Mode State
        if (localStorage.getItem('ios_web_dark_mode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('ios_web_dark_mode', isDark);
            
            // Close menu if open on mobile
            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('open')) {
                toggleMenu();
            }
        }

        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + viewName).classList.add('active');
            
            document.querySelectorAll('.nav-links-desktop a').forEach(el => el.classList.remove('active'));
            // Exclude DM toggle from active states
            const navLink = document.getElementById('link-' + viewName);
            if (navLink) navLink.classList.add('active');

            window.scrollTo(0,0);
            
            // Close mobile menu
            const menu = document.getElementById('mobile-menu');
            const ham = document.querySelector('.hamburger');
            if(menu.classList.contains('open')) {
                menu.classList.remove('open');
                ham.classList.remove('active');
            }
        }
        
        
        
        
        
        function toggleDocsSidebar() {
            // Robust Selection: Tries ID first, then Class
            const sidebar = document.getElementById('docs-sidebar') || document.querySelector('.docs-sidebar');
            const overlay = document.querySelector('.mobile-sidebar-overlay');
            
            // Check if elements exist before accessing classList
            if (sidebar && overlay) {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            } else {
                console.error("Sidebar UI elements not found. Check HTML IDs.");
            }
        }

        // Auto-close on link click (Mobile UX)
        document.querySelectorAll('.docs-sidebar a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById('docs-sidebar') || document.querySelector('.docs-sidebar');
                    const overlay = document.querySelector('.mobile-sidebar-overlay');
                    if(sidebar) sidebar.classList.remove('active');
                    if(overlay) overlay.classList.remove('active');
                }
            });
        });
        
        
     // --- SUPPORT SIDEBAR LOGIC ---
        function toggleSupportSidebar() {
            // Target the Support Sidebar specifically
            const sidebar = document.getElementById('support-sidebar');
            // We can reuse the overlay class, but scope it to the support view if needed.
            // Since only one view is active at a time, selecting the generic class is safe.
            const overlay = document.querySelector('#view-support .mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            }
        }

        // Auto-close Support links
        document.querySelectorAll('#support-sidebar a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    const sidebar = document.getElementById('support-sidebar');
                    const overlay = document.querySelector('#view-support .mobile-sidebar-overlay');
                    if(sidebar) sidebar.classList.remove('active');
                    if(overlay) overlay.classList.remove('active');
                }
            });
        });   
        
        
        

        function toggleMenu() {
            document.getElementById('mobile-menu').classList.toggle('open');
            document.querySelector('.hamburger').classList.toggle('active');
        }

        function mobileNavigate(view) { switchView(view); }
        
        
        
        
        /* --- AUTO-ROUTING (Deep Links) --- */
window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    // Support both ?page= and ?view=
    const targetView = params.get('page') || params.get('view');
    
    // Whitelist valid views to match your HTML IDs (view-home, view-docs, etc.)
    const validViews = ['home', 'docs', 'support', 'privacy', 'terms', 'about'];
    
    if (targetView && validViews.includes(targetView)) {
        console.log("🚀 Auto-routing to:", targetView);
        switchView(targetView);
        
        // Optional: If there is also a hash anchor (e.g., ?page=support#sup-sideload)
        if (window.location.hash) {
            setTimeout(() => {
                const el = document.querySelector(window.location.hash);
                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300); // Small delay to allow view transition
        }
    }
});
        
        
        
        
        /* --- SEARCH ENGINE & LOGIC --- */

const searchIndex = [
    // DOCUMENTATION
    { id: 'doc-start', title: 'Getting Started', category: 'Documentation', text: 'Host-guest architecture, URL Embed, HTML Upload, App Builder', view: 'docs' },
    { id: 'doc-deploy', title: 'Deployment & Security', category: 'Documentation', text: 'HTTPS requirement, Service Workers, secure contexts', view: 'docs' },
    { id: 'doc-verify', title: 'App Store Verification', category: 'Documentation', text: 'Badges, Trusted Member, Official Partner, verification request', view: 'docs' },
    { id: 'doc-audio', title: 'Audio Focus Manager', category: 'Documentation', text: 'Prevent audio overlap, IOS_AUDIO_REQUEST, AudioClient', view: 'docs' },
    { id: 'doc-api', title: 'System APIs', category: 'Documentation', text: 'setWallpaper, showAlert, fetchAllApps, Bridge, IOS_INJECT_SCRIPT', view: 'docs' },
    { id: 'doc-island', title: 'Dynamic Island API', category: 'Documentation', text: 'triggerSystemNotification, compact mode, expanded mode, live activity', view: 'docs' },
    { id: 'doc-settings', title: 'Settings Injection', category: 'Documentation', text: 'Toggle Dark Mode, Brightness, Airplane Mode, WiFi', view: 'docs' },
    { id: 'doc-mods', title: 'System Mods (Root)', category: 'Documentation', text: 'injectMod, Root Privilege, Malware protection', view: 'docs' },
    { id: 'doc-iap', title: 'IAP Packages', category: 'Documentation', text: 'AES-256 Encryption, Offline install, Integrity Check', view: 'docs' },

    // SUPPORT
    { id: 'sup-safety', title: 'Safety & Recovery', category: 'Support', text: 'Safe Mode, Black Screen of Death, recovery tools', view: 'support' },
    { id: 'sup-trust', title: 'Trust & Verification', category: 'Support', text: 'Green Shield, Blue Tick, Trusted System App', view: 'support' },
    { id: 'sup-sideload', title: 'Sideloading Guide', category: 'Support', text: 'Installing .html files, risks, restricted privileges', view: 'support' },
    { id: 'sup-report', title: 'Report System', category: 'Support', text: 'Community moderation, Shadow Ban, Tripwire, Report button', view: 'support' },
    { id: 'sup-assistive', title: 'Assistive Touch', category: 'Support', text: 'Floating button, Back, Home, Auto-Hide, Pro behavior', view: 'support' },
    { id: 'sup-display', title: 'Display Settings', category: 'Support', text: 'Brightness slider, True Tone, eye strain, dark mode', view: 'support' },

    // GENERAL
    { id: 'view-home', title: 'Home / Overview', category: 'General', text: 'iOS Web Ecosystem, Simulator, App Builder', view: 'home' },
    { id: 'view-about', title: 'About the Project', category: 'General', text: 'Open source, mission, technology stack, Github', view: 'about' },
    
    
    // NEW: App Builder Guide
    { id: 'doc-builder', title: 'App Builder Guide', category: 'Documentation', text: 'Create app, update app, publish hosted mode, html upload, delete app', view: 'docs' },

    // NEW: GitHub & Issues
    { id: 'sup-github', title: 'GitHub & Issues', category: 'Support', text: 'Submit bug report, request pardon, appeal ban, feature request, repository', view: 'support' }
    
    
];

// --- 1. RANDOM TAGS GENERATOR ---
function renderRandomTags() {
    // Get unique titles
    const titles = searchIndex.map(item => item.title);
    
    // Shuffle array (Fisher-Yates)
    for (let i = titles.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [titles[i], titles[j]] = [titles[j], titles[i]];
    }
    
    // Pick 5
    const selected = titles.slice(0, 5);

    // Render
    const container = document.getElementById('search-results-area');
    let tagsHtml = selected.map(tag => 
        `<span onclick="triggerSearch('${tag.replace(/'/g, "\\'")}')">${tag}</span>`
    ).join('');

    container.innerHTML = `
        <div class="empty-search-state">
            
            <h3>Quick Links</h3>
            <div class="quick-tags">
                ${tagsHtml}
            </div>
        </div>`;
}

// --- 2. SEARCH EXECUTION ---
const searchInput = document.getElementById('global-search-input');
if (searchInput) {
    searchInput.addEventListener('input', (e) => {
        performSearch(e.target.value);
    });
}

function triggerSearch(query) {
    const input = document.getElementById('global-search-input');
    input.value = query;
    performSearch(query);
}

// --- PRO SEARCH ENGINE (Smart, Fuzzy & Spaceless) ---

// 1. Levenshtein Distance (Typo Solver)
const levenshtein = (a, b) => {
    if(!a || !b) return (a || b).length;
    const m = [];
    for(let i=0; i<=b.length; i++){ m[i] = [i]; }
    for(let j=0; j<=a.length; j++){ m[0][j] = j; }
    for(let i=1; i<=b.length; i++){
        for(let j=1; j<=a.length; j++){
            if(b.charAt(i-1) == a.charAt(j-1)){ m[i][j] = m[i-1][j-1]; }
            else { m[i][j] = Math.min(m[i-1][j-1]+1, Math.min(m[i][j-1]+1, m[i-1][j]+1)); }
        }
    }
    return m[b.length][a.length];
};

// 2. Advanced Scoring (The Brain)
const calculateScore = (item, query) => {
    let score = 0;
    const term = query.toLowerCase().trim();
    const cleanTerm = term.replace(/\s+/g, ''); // "app builder" -> "appbuilder"
    
    // Data Prep
    const title = item.title.toLowerCase();
    const cleanTitle = title.replace(/\s+/g, ''); // "App Builder Guide" -> "appbuilderguide"
    const cat = item.category.toLowerCase();
    const text = item.text.toLowerCase();
    
    // Tokens for fuzzy matching
    const queryTokens = term.split(/\s+/).filter(t => t.length > 0);
    const itemTokens = (title + " " + cat).split(/\s+/);

    // --- RULE 1: EXACT & SUBSTRING MATCHES (Highest Priority) ---
    if (title === term) score += 200; // Perfect match
    else if (title.includes(term)) score += 100; // "App Builder" contains "App"
    
    // --- RULE 2: SPACELESS MATCH (Fixes "appbuilder") ---
    // If the stripped title INCLUDES the stripped query
    else if (cleanTitle.includes(cleanTerm)) score += 80; 

    // --- RULE 3: TOKEN MATCHING (Handles "app" + "guide") ---
    queryTokens.forEach(qToken => {
        let bestTokenScore = 0;
        
        itemTokens.forEach(iToken => {
            // A. Exact Token Match
            if (iToken === qToken) {
                bestTokenScore = Math.max(bestTokenScore, 30);
            }
            // B. Fuzzy Token Match (Typo: "bulder" -> "builder")
            else if (Math.abs(iToken.length - qToken.length) < 3) {
                const dist = levenshtein(iToken, qToken);
                if (dist <= 1) bestTokenScore = Math.max(bestTokenScore, 20); // Very close
                else if (dist <= 2) bestTokenScore = Math.max(bestTokenScore, 10); // Close
            }
        });
        
        // Boost if token found in Category/Text instead
        if (bestTokenScore === 0) {
            if (cat.includes(qToken)) bestTokenScore = 15;
            else if (text.includes(qToken)) bestTokenScore = 5;
        }
        
        score += bestTokenScore;
    });

    return score;
};

// 3. MAIN SEARCH FUNCTION
function performSearch(query) {
    const resultsArea = document.getElementById('search-results-area');
    const shareBtn = document.getElementById('search-share-btn');
    const term = query.toLowerCase().trim();

    // UI Toggle
    if (term.length > 0) shareBtn.classList.add('visible');
    else shareBtn.classList.remove('visible');

    if (term.length === 0) {
        renderRandomTags();
        return;
    }

    // --- EXECUTE SEARCH ---
    let hits = searchIndex.map(item => ({ ...item, score: calculateScore(item, term) }))
                          .filter(item => item.score > 5) // Must have some relevance
                          .sort((a, b) => b.score - a.score);

    // --- RENDER RESULTS ---
    if (hits.length === 0) {
        // Optional: Pro Tip for no results
        resultsArea.innerHTML = `
            <div class="empty-search-state">
                
                <h3>No results for "${query}"</h3>
                <p style="font-size:14px; color:var(--text-secondary); margin-top:5px;">
                    Try removing filters or checking for typos.
                </p>
            </div>`;
        return;
    }

    // Group Results by Category
    const grouped = {};
    hits.forEach(item => {
        if (!grouped[item.category]) grouped[item.category] = [];
        grouped[item.category].push(item);
    });

    let html = '';
    
    // Check if we "Autocorrected" implicitly (High score via fuzzy/spaceless)
    // We only show "Top Result" highlights if it's a very strong match vs others
    
    for (const [category, items] of Object.entries(grouped)) {
        html += `<div class="result-category-header">${category}</div>`;
        items.forEach(item => {
            // Smart Snippet: Try to highlight the keyword
            let snippet = item.text;
            if (snippet.length > 100) snippet = snippet.substring(0, 100) + '...';
            
            html += `
            <div class="result-card" onclick="navigateToResult('${item.view}', '${item.id}')">
                <div class="result-path">${category} > ${item.title}</div>
                <h4>${item.title}</h4>
                <p>${snippet}</p>
            </div>`;
        });
    }
    resultsArea.innerHTML = html;
}

function navigateToResult(view, hash) {
    switchView(view);
    setTimeout(() => {
        const el = document.getElementById(hash);
        if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            el.style.transition = 'background 0.5s';
            const oldBg = el.style.background;
            el.style.background = 'rgba(0,122,255,0.1)';
            setTimeout(() => { el.style.background = oldBg; }, 1000);
        }
    }, 300);
}

// --- 3. SHARE & TOAST SYSTEM ---

function showToast(message) {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = 'toast-msg';
    toast.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        ${message}
    `;
    
    container.appendChild(toast);

    // Remove after 3s
    setTimeout(() => {
        toast.style.animation = 'toastOut 0.3s forwards';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

function shareSearchQuery() {
    const query = document.getElementById('global-search-input').value.trim();
    if (!query) return;

    // Create Deep Link
    const url = `${window.location.origin}${window.location.pathname}?page=search&s=${encodeURIComponent(query)}`;
    
    navigator.clipboard.writeText(url).then(() => {
        // Trigger Toast
        showToast('Link Copied to Clipboard');
    }).catch(err => {
        console.error('Failed to copy', err);
    });
}

// --- 4. AUTO-ROUTER (Deep Link Handler) ---
window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const targetView = params.get('page') || params.get('view');
    const searchQuery = params.get('s');

    const validViews = ['home', 'docs', 'support', 'privacy', 'terms', 'about', 'search'];

    if (targetView && validViews.includes(targetView)) {
        switchView(targetView);

        if (targetView === 'search') {
            if (searchQuery) {
                const input = document.getElementById('global-search-input');
                if (input) {
                    input.value = searchQuery;
                    performSearch(searchQuery);
                }
            } else {
                // If Search page but empty, show random tags
                renderRandomTags();
            }
        }
        else if (window.location.hash) {
            setTimeout(() => {
                const el = document.querySelector(window.location.hash);
                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
        }
    } else {
        // Fallback for when we navigate to Search manually without a query
        const input = document.getElementById('global-search-input');
        if (input && !input.value) {
            renderRandomTags();
        }
    }
});
        
        
        
        /* --- DYNAMIC URL ROUTER (One-Step Fix) --- */

// 1. Capture your existing view switcher
const _originalSwitchView = window.switchView;

// 2. Override it to inject URL updates automatically
window.switchView = function(viewName) {
    if (_originalSwitchView) _originalSwitchView(viewName);
    
    // Updates URL to: ?page=viewName
    const newUrl = `${window.location.pathname}?page=${viewName}`;
    window.history.pushState({ path: newUrl }, '', newUrl);
};

// 3. Override Search Navigation to handle specific #Anchors
window.navigateToResult = function(view, hash) {
    // Switch the view first
    switchView(view); 

    // Then refine URL to: ?page=viewName#section-id
    const deepLink = `${window.location.pathname}?page=${view}#${hash}`;
    window.history.replaceState({ path: deepLink }, '', deepLink);

    // Perform the smooth scroll
    setTimeout(() => {
        const el = document.getElementById(hash);
        if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            // Flash Highlight
            const oldTransition = el.style.transition;
            const oldBg = el.style.background;
            el.style.transition = 'background 0.5s';
            el.style.background = 'rgba(0, 122, 255, 0.15)'; // Blue highlight
            setTimeout(() => { 
                el.style.background = oldBg; 
                el.style.transition = oldTransition; 
            }, 1000);
        }
    }, 300);
};
        
        
        
        
        
        
        
// --- 200MB RAM OPTIMIZED NAVIGATION ENGINE ---

(function() {
    // 1. STYLE INJECTION (Single Paint)
    const styleId = 'opt-active-styles';
    if (!document.getElementById(styleId)) {
        const style = document.createElement('style');
        style.id = styleId;
        style.innerHTML = `
            .footer-nav span.active { color: var(--accent); font-weight: 700; opacity: 1; }
            .nav-links-desktop a.active { color: var(--accent); font-weight: 700; }
            .docs-sidebar a.active { color: var(--accent); opacity: 1; border-left: 2px solid var(--accent); padding-left: 12px; font-weight: 600; }
            .docs-sidebar a { transition: border-left 0.2s, padding-left 0.2s; border-left: 2px solid transparent; }
        `;
        document.head.appendChild(style);
    }

    // 2. STATE CACHE (Prevents DOM Thrashing)
    const Cache = {
        navButtons: new Map(),      // Maps 'viewName' -> Array of Buttons
        sidebarLinks: new Map(),    // Maps 'sectionID' -> Link Element
        activeLink: null,           // Currently highlighted sidebar link
        observer: null
    };

    // 3. BUILD CACHE (Run Once)
    function buildCache() {
        // Cache Navigation Buttons
        document.querySelectorAll('[onclick*="switchView"]').forEach(btn => {
            const match = btn.getAttribute('onclick').match(/'([^']+)'/);
            if (match) {
                const view = match[1];
                if (!Cache.navButtons.has(view)) Cache.navButtons.set(view, []);
                Cache.navButtons.get(view).push(btn);
            }
        });

        // Cache Sidebar Links
        document.querySelectorAll('.docs-sidebar a').forEach(link => {
            const href = link.getAttribute('href');
            if (href && href.startsWith('#')) {
                Cache.sidebarLinks.set(href.substring(1), link); // Map ID to Link
                
                
                link.addEventListener('click', () => { document.querySelectorAll('.docs-sidebar a').forEach(el => el.classList.remove('active')); link.classList.add('active'); Cache.activeLink = link; });
                
            }
        });
    }

    // 4. OPTIMIZED VIEW SWITCHER (Frame-Perfect)
    const _baseSwitch = window.switchView;

    window.switchView = function(viewName) {
        if (_baseSwitch) _baseSwitch(viewName);

        // Schedule visual updates for the next paint frame
        requestAnimationFrame(() => {
            // A. Instantly update Nav Buttons (No loops over document)
            Cache.navButtons.forEach((btns, view) => {
                const isActive = (view === viewName);
                btns.forEach(b => {
                    // Only touch DOM if classList actually changes
                    if (isActive && !b.classList.contains('active')) b.classList.add('active');
                    if (!isActive && b.classList.contains('active')) b.classList.remove('active');
                });
            });

            // B. Manage ScrollSpy Lifecycle (Lazy Load)
            if (viewName === 'docs' || viewName === 'support') {
                if (!Cache.observer) initScrollSpy();
            } else {
                shutdownScrollSpy(); // Save RAM when not needed
            }
        });
    };

    // 5. ZERO-LAG SCROLLSPY (IntersectionObserver)
    function initScrollSpy() {
        // Only observe elements that actually exist
        const targets = [];
        Cache.sidebarLinks.forEach((_, id) => {
            const el = document.getElementById(id);
            if (el) targets.push(el);
        });

        if (targets.length === 0) return;

        Cache.observer = new IntersectionObserver((entries) => {
            // Find the first intersecting element
            const visible = entries.find(e => e.isIntersecting);
            if (visible) {
                const link = Cache.sidebarLinks.get(visible.target.id);
                if (link && link !== Cache.activeLink) {
                    // Swap classes efficiently
                    if (Cache.activeLink) Cache.activeLink.classList.remove('active');
                    link.classList.add('active');
                    Cache.activeLink = link;
                }
            }
        }, { rootMargin: '-10% 0px -70% 0px', threshold: 0 });

        targets.forEach(t => Cache.observer.observe(t));
    }

    function shutdownScrollSpy() {
        if (Cache.observer) {
            Cache.observer.disconnect();
            Cache.observer = null;
        }
    }

    // 6. INITIALIZE
    // Wait for DOM, then build cache and set initial state
    const init = () => {
        buildCache();
        const params = new URLSearchParams(window.location.search);
        const page = params.get('page') || 'home';
        // Highlight initial state without triggering full switch logic if unnecessary
        const btns = Cache.navButtons.get(page);
        if(btns) btns.forEach(b => b.classList.add('active'));
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

})();
        
        
        
        
    </script>
</body>
</html>